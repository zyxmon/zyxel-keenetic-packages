#summary Устанавливаем систему opkg.

= Устанавливаем систему opkg =

Для установки полноценного Linux, ssh сервера dropbear и системы установки opkg берем носитель, который удовлетворяет условиям [usb_hdd раздела 1], скачиваем со страницы Downloads любой из архивов `ext_init.sh-r2.tar.gz` или `ext_init.sh-r2.zip` и распаковываем содержимое архива в папку system/bin на носителе. (Для прошивок, выпущенных до 11 ноября 2011г нужны архивы `ext_init.sh.tar.gz` или `ext_init.sh.zip`.) Указанные архивы содержат один файл ext_init.sh, являющийся самораспаковывающимся архивом Linux. Файл ext_init.sh должен иметь атрибут исполнения. Для установки этого атрибута можно использовать дистрибутив Linux. Если дистрибутива Linux под рукой нет, можно скопировать этот файл через сетевое окружение Windows прямо на носитель, подключенный к ZyXEL Keenetic - атрибут исполнения в этом случае будет установлен автоматически. Файл следует копировать в папку DISK_A1/system/bin (папку следует создать).

После этого подключаем носитель к Keenetic (если копировали файл на компьютере под Linux) или перемонтируем носитель (на закладке "Монитор" в web интерфейсе отключаем диск, физически отключаем носитель от usb порта, затем потом снова подключаем). Ждем минуты две, пока в "Журнале" Keentic (страница web конфигуратора) не появится строка
{{{
dropbear[4261]    Running in background 
}}}
Подключаемся к кинетику по ssh. Логин root, пароль из пяти букв, начинающийся на z. Выполняем к консоли finish_install.sh
и ждем пока все завершится (создастся swap файл):
{{{
/media/DISK_A1/system/root # finish_install.sh
Creating swap file. Please wait...
128+0 records in
128+0 records out
Setting up swapspace version 1, size = 134213633 bytes 
}}}
Теперь меняем командой passwd пароль для ssh. Этот пароль никак не связан с паролем web интерфейса. На этом установка завершена.

Установленный dropbear работает с ключами авторизации, если их записать в /media/DISK_A1/etc/dropbear/authorization_keys 